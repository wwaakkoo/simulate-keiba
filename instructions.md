# 作業指示書 — 競馬シミュレーションアプリ

> **このファイルはAntigravityエージェントへの作業指示を記載するファイルです。**
> 使い方: `@instructions.md @GEMINI.md` でチャットに参照
> **完了済みタスクは `docs/HISTORY.md` を参照してください。**

---

## 📋 現在のタスク

**タスク概要**: データ品質向上 & 予測エンジン最適化 (Phase E/F)

**優先度**: 高

**最終更新**: 2026-02-15 (Phase D完了)

---

## 🚧 進行中のフェーズ

### ブラッシュアップ Phase 5: 品質向上・UI刷新 🔄
- [x] デザインシステムの構築 (CSS変数)
- [x] ホームページの刷新 (ダッシュボード化)
- [ ] 結果分析ダッシュボードの実装
- [ ] モバイルレスポンシブ対応の強化
- [ ] パフォーマンスチューニング (Lighthouseスコア改善)

### Phase F: 高度な特徴量 (血統・タイム指数) ⏳
- [ ] 血統データの収集と特徴量化
- [ ] タイム指数 (Speed Index) の実装
- [ ] 騎手・調教師データの重み付け改善

---

## 🗺️ 次フェーズの概要

### Phase G: データ拡充と検証強化 (2024-25データ)
- [x] 2024-2025年データのスクレイピング実装
- [ ] 時系列バリデーションの強化
- [ ] 予測精度モニタリング基盤の構築

---

## 🔄 Antigravityでの作業フロー

### 新機能の実装

```
@instructions.md @GEMINI.md

[タスクの詳細]を実装してください。
まず実装計画を提示してください。
```

### バグ修正

```
@instructions.md

次のエラーが発生しています:
[エラーメッセージ]

原因を特定して修正してください。
修正後はテストケースも追加してください。
```

---

## ⚠️ 開発時の注意事項

### 実装前チェックリスト
- [ ] GEMINI.md の禁止事項を確認
- [ ] **`docs/ARCHITECTURE.md` を確認して全体像を把握**
- [ ] 実装計画を提示し承認を得る
- [ ] テストケースを先に設計

### コミット前チェックリスト
- [ ] Frontend: `npm run type-check` → エラーなし
- [ ] Frontend: `npm run lint` → エラーなし
- [ ] Frontend: `npm test` → 全パス
- [ ] Backend: `ruff check app/` → エラーなし
- [ ] Backend: `pytest tests/ -v` → 全パス

---

## 📚 参照すべきファイル

**必ず参照:**
- `@GEMINI.md` — プロジェクト全体のルール・技術スタック・読み込み禁止ファイル
- `@styleguide.md` — コーディングスタイルガイド
- `@docs/ARCHITECTURE.md` — **プロジェクト構造地図（まずこれを読む）**
- `@docs/HISTORY.md` — 過去の作業履歴

**API仕様:**
- `@docs/openapi.json` — バックエンドAPI定義

**コード参照（タスクに応じて）:**
- `@frontend/src/types/race.ts` — ドメイン型定義
- `@backend/app/main.py` — FastAPIエントリーポイント
